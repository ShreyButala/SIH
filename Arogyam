<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arogyam: The Healthcare Chatbot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* General body and container styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #334155;
            line-height: 1.6;
        }
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Page section visibility control */
        .page-section {
            display: none;
        }
        .page-section.active {
            display: block;
        }

        /* Navigation bar styling */
        .nav-bar {
            position: sticky;
            top: 0;
            z-index: 50;
            background-color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: center;
            padding: 1rem 0.5rem;
            border-bottom-left-radius: 0.75rem;
            border-bottom-right-radius: 0.75rem;
        }
        .nav-bar button {
            margin: 0 0.5rem;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            line-height: 1.25rem;
            font-weight: 600;
            color: #4b5563;
            border-radius: 9999px;
            transition-property: all;
            transition-duration: 300ms;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transform: scale(1);
        }
        .nav-bar button:hover {
            transform: scale(1.05);
        }
        .nav-bar button.active {
            background-color: #059669;
            color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* Chatbot-specific styling */
        .whatsapp-chat-mockup {
            background-color: white;
            border-radius: 1.5rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            display: flex;
            flex-direction: column;
            min-height: 600px;
            width: 100%;
            max-width: 28rem;
            overflow: hidden;
        }
        .chat-header {
            background-color: #059669;
            color: white;
            padding: 1rem;
            display: flex;
            align-items: center;
            border-top-left-radius: 1.5rem;
            border-top-right-radius: 1.5rem;
        }
        .chat-log {
            flex-grow: 1;
            padding: 1.5rem;
            overflow-y: auto;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" fill="%23e2e8f0" opacity="0.1"><rect width="100%" height="100%" /></svg>');
            background-repeat: repeat;
        }
        .message-bubble {
            max-width: 75%;
            padding: 1rem;
            border-radius: 0.75rem;
            margin-bottom: 0.75rem;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
            word-wrap: break-word;
            transition-property: all;
            transition-duration: 300ms;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transform: scale(1);
        }
        .user-message {
            background-color: #bbf7d0;
            margin-left: auto;
            border-top-right-radius: 0.25rem;
        }
        .bot-message {
            background-color: #e2e8f0;
            margin-right: auto;
            border-top-left-radius: 0.25rem;
        }
        .question-button {
            background-color: #d1fae5;
            color: #065f46;
            padding: 0.75rem 1.25rem;
            border-radius: 9999px;
            text-align: left;
            font-weight: 500;
            cursor: pointer;
            transition-property: all;
            transition-duration: 300ms;
        }
        .voice-btn {
            background: #d1fae5;
            color: #065f46;
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition-property: all;
        }

        /* Dashboard styles */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        .dashboard-card {
            background-color: white;
            padding: 2rem;
            border-radius: 1.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .chart-container {
            height: 16rem;
        }
        
        /* Form styles */
        .form-panel {
            background-color: white;
            padding: 2rem;
            border-radius: 1.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            max-width: 32rem;
            margin: 0 auto;
        }
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 1rem;
            border: 1px solid #cbd5e1;
            border-radius: 0.75rem;
        }

        /* Modal styling */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 1.5rem;
            max-width: 28rem;
            width: 90%;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            position: relative;
        }
    </style>
</head>
<body class="bg-slate-50">

    <!-- Navigation Bar -->
    <nav class="nav-bar">
        <button onclick="showPage('home')" class="active" id="nav-home">Home</button>
        <button onclick="showPage('chat')" id="nav-chat">Chat</button>
        <button onclick="showPage('dashboard')" id="nav-dashboard">Dashboard</button>
        <button onclick="showPage('form')" id="nav-form">Form</button>
    </nav>

    <!-- Home Page Section -->
    <div id="home" class="page-section active container">
        <header class="bg-gradient-to-br from-emerald-500 to-emerald-700 text-white rounded-3xl py-24 md:py-32 text-center shadow-xl">
            <h1 class="text-4xl md:text-6xl font-extrabold leading-tight mb-4 drop-shadow-md">
                Healthcare <span class="text-emerald-200">Simplified</span> with Arogyam
            </h1>
            <p class="text-lg md:text-xl text-emerald-100 max-w-3xl mx-auto mb-8 font-light">
                Instant, reliable health information on a platform everyone uses: WhatsApp.
            </p>
            <div class="flex flex-wrap justify-center gap-4">
                <a href="https://wa.me/919999999999?text=Hello%20Arogyam!%20I%20would%20like%20to%20know%20more%20about%20your%20services." target="_blank" class="bg-white text-emerald-600 px-8 py-4 rounded-full font-bold shadow-lg hover:bg-emerald-50 transition-all duration-300">
                    <i class="fab fa-whatsapp mr-2"></i> Connect via WhatsApp
                </a>
                <button onclick="showModal('sms')" class="bg-slate-800 text-white px-8 py-4 rounded-full font-bold shadow-lg hover:bg-slate-700 transition-all duration-300">
                    <i class="fas fa-sms mr-2"></i> Connect via SMS
                </button>
                <button onclick="showPage('chat')" class="bg-emerald-100 text-emerald-800 px-8 py-4 rounded-full font-bold shadow-lg hover:bg-emerald-200 transition-all duration-300">
                    <i class="fas fa-comments mr-2"></i> Start Web Chat
                </button>
            </div>
        </header>

        <!-- Problem & Solution Section -->
        <section class="py-20 bg-slate-50">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                <div class="bg-white rounded-3xl p-8 shadow-xl transition-all duration-300 transform hover:scale-[1.02] hover:shadow-2xl">
                    <h2 class="text-3xl font-bold text-red-600 mb-4">The Challenge</h2>
                    <p class="text-slate-600 leading-relaxed">
                        Access to accurate health information is a significant challenge for rural and semi-urban populations. Misinformation and a lack of real-time communication channels lead to delayed care and a general lack of awareness about critical preventive healthcare measures and government advisories.
                    </p>
                    <ul class="list-disc list-inside mt-4 space-y-2 text-slate-600">
                        <li><i class="fas fa-exclamation-triangle mr-2 text-red-500"></i> Widespread misinformation</li>
                        <li><i class="fas fa-phone-slash mr-2 text-red-500"></i> Limited access to health workers</li>
                        <li><i class="fas fa-clock mr-2 text-red-500"></i> Delays in disease symptom diagnosis</li>
                    </ul>
                </div>
                <div class="bg-white rounded-3xl p-8 shadow-xl transition-all duration-300 transform hover:scale-[1.02] hover:shadow-2xl">
                    <h2 class="text-3xl font-bold text-emerald-600 mb-4">Our Solution</h2>
                    <p class="text-slate-600 leading-relaxed">
                        We are building **Arogyam**, a multilingual AI chatbot that educates and informs rural populations on preventive healthcare, disease symptoms, and vaccination schedules. It provides real-time alerts for outbreaks by integrating with government health databases.
                    </p>
                    <ul class="list-disc list-inside mt-4 space-y-2 text-slate-600">
                        <li><i class="fas fa-percent mr-2 text-emerald-500"></i> 80% accuracy in health queries</li>
                        <li><i class="fas fa-arrow-up mr-2 text-emerald-500"></i> 20% increase in health awareness</li>
                        <li><i class="fas fa-cloud mr-2 text-emerald-500"></i> Built on NLP frameworks (Rasa, Dialogflow)</li>
                    </ul>
                </div>
            </div>
        </section>
    </div>

    <!-- Chat Page Section -->
    <div id="chat" class="page-section flex items-center justify-center min-h-screen py-12">
        <div class="whatsapp-chat-mockup">
            <div class="chat-header">
                <img src="https://placehold.co/40x40/007bff/FFFFFF?text=A" alt="Chatbot Icon">
                <div class="flex-grow">
                    <p class="font-bold flex items-center">Arogyam <i class="fas fa-check-circle ml-1 text-emerald-200"></i></p>
                    <p class="text-xs text-emerald-200">Online</p>
                </div>
                <select id="language-toggle" class="bg-transparent border border-emerald-200 text-white rounded-md p-1 text-sm focus:ring-2 focus:ring-emerald-100">
                    <option class="text-black" value="en">English</option>
                    <option class="text-black" value="hi">हिन्दी</option>
                    <option class="text-black" value="gu">ગુજરાતી</option>
                    <option class="text-black" value="or">ଓଡ଼ିଆ</option>
                </select>
            </div>
            <div id="chat-log" class="chat-log flex flex-col">
                <div class="message-bubble bot-message">
                    Welcome! I'm Arogyam, your multilingual health assistant. I can provide verified health information and government advisories.
                </div>
                <div class="message-bubble bot-message">
                    Hello! How can I assist you today?
                </div>
            </div>
            <div class="p-4 bg-slate-50 border-t border-slate-200">
                <div class="question-buttons">
                    <button class="question-button" data-question="What are the symptoms of dengue fever?">
                        What are the symptoms of dengue fever?
                    </button>
                    <button class="question-button" data-question="What is the vaccination schedule for children?">
                        What is the vaccination schedule for children?
                    </button>
                    <button class="question-button" data-question="What should I do if I have a persistent cough?">
                        What should I do if I have a persistent cough?
                    </button>
                    <button class="question-button" data-question="Suggest a nearby doctor.">
                        Suggest a nearby doctor.
                    </button>
                </div>
                <div class="mt-4 flex items-center gap-2">
                    <input type="text" id="user-input" placeholder="Type your message..." class="flex-grow p-3 rounded-full border border-slate-300 focus:outline-none focus:border-emerald-500 transition-colors">
                    <button id="voice-button" class="voice-btn"><i class="fas fa-microphone mic-icon"></i></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Page Section -->
    <div id="dashboard" class="page-section container py-12">
        <h2 class="text-4xl font-bold text-center mb-4 text-slate-800">Health Worker Dashboard</h2>
        <div class="bg-amber-50 border-l-4 border-amber-500 text-amber-700 p-4 rounded-xl mb-8" role="alert">
            <div class="flex">
                <div class="py-1"><svg class="fill-current h-6 w-6 text-amber-500 mr-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"/></svg></div>
                <div>
                    <p class="font-bold">Demonstration Data</p>
                    <p class="text-sm">The data displayed here is for **demonstration purposes only** and is not from a real-world source.</p>
                    <a href="https://www.who.int" target="_blank" class="text-amber-700 underline font-semibold mt-2 block">Reference: World Health Organization (WHO)</a>
                </div>
            </div>
        </div>
        <div class="dashboard-grid">
            <div class="dashboard-card">
                <h3 class="text-xl font-bold mb-4 text-slate-800">User Queries Over Time</h3>
                <div class="chart-container">
                    <canvas id="userQueriesChart"></canvas>
                </div>
            </div>
            <div class="dashboard-card">
                <h3 class="text-xl font-bold mb-4 text-slate-800">Most Common Symptoms</h3>
                <div class="chart-container">
                    <canvas id="symptomsChart"></canvas>
                </div>
            </div>
            <div class="dashboard-card">
                <h3 class="text-xl font-bold mb-4 text-slate-800">Vaccination Schedules</h3>
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white rounded-xl">
                        <thead class="bg-slate-100">
                            <tr>
                                <th class="py-3 px-4 text-left font-semibold text-sm text-slate-600">Vaccine</th>
                                <th class="py-3 px-4 text-left font-semibold text-sm text-slate-600">Location</th>
                                <th class="py-3 px-4 text-left font-semibold text-sm text-slate-600">Date</th>
                            </tr>
                        </thead>
                        <tbody id="vaccinationTable">
                            <!-- Data will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="dashboard-card">
                <h3 class="text-xl font-bold mb-4 text-slate-800">Awareness Growth</h3>
                <div class="chart-container">
                    <canvas id="awarenessChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Form Page Section -->
    <div id="form" class="page-section container flex justify-center py-12">
        <div class="form-panel">
            <div class="text-center mb-6">
                <h2 class="text-3xl font-bold text-slate-800">Register or Report Symptoms</h2>
                <p class="text-slate-600 mt-2 max-w-sm mx-auto">
                    Fill out this form to get timely updates on health advisories, vaccination drives, and to privately report symptoms to local health workers.
                </p>
            </div>
            <form id="userForm">
                <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" required>
                </div>
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" pattern="[0-9]{10}" required>
                </div>
                <div class="form-group">
                    <label for="symptoms">Reported Symptoms</label>
                    <textarea id="symptoms" rows="4" placeholder="e.g., Fever, headache, cough..."></textarea>
                </div>
                <div class="form-group flex items-center">
                    <input type="checkbox" id="reminder" class="w-auto mr-2 rounded-md h-5 w-5 text-emerald-600 focus:ring-emerald-500">
                    <label for="reminder" class="mb-0 text-slate-700">Send me vaccination reminders via SMS.</label>
                </div>
                <div id="form-message" class="hidden mt-6 p-4 text-emerald-700 bg-emerald-100 rounded-lg font-medium"></div>
                <button type="submit" class="w-full bg-emerald-600 text-white py-3 mt-6 rounded-full font-bold shadow-lg hover:bg-emerald-700 transition-colors duration-300">Submit</button>
            </form>
        </div>
    </div>
    
    <!-- Modal for SMS/WhatsApp/Web Chat Connect -->
    <div id="connect-modal" class="modal-overlay hidden">
        <div class="modal-content text-center">
            <button class="modal-close-btn" onclick="hideModal()"><i class="fas fa-times"></i></button>
            <h2 id="modal-title" class="text-3xl font-bold mb-4"></h2>
            <p id="modal-description" class="text-slate-600 mb-6">Please provide your details to connect with Arogyam.</p>
            <form id="connectForm">
                <div class="form-group">
                    <label for="connectName" class="sr-only">Full Name</label>
                    <input type="text" id="connectName" placeholder="Full Name" required>
                </div>
                <div class="form-group">
                    <label for="connectPhone" class="sr-only">Phone Number</label>
                    <input type="tel" id="connectPhone" pattern="[0-9]{10}" placeholder="Phone Number (e.g., 9876543210)" required>
                </div>
                <button type="submit" class="w-full bg-emerald-600 text-white py-3 mt-2 rounded-full font-bold shadow-lg hover:bg-emerald-700 transition-colors duration-300">
                    Connect
                </button>
            </form>
            <div id="connect-message" class="hidden mt-4 p-4 text-emerald-700 bg-emerald-100 rounded-lg font-medium"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-slate-800 text-white py-12">
        <div class="container text-center">
            <p>&copy; 2024 Arogyam. All rights reserved.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const pages = document.querySelectorAll('.page-section');
        const navButtons = document.querySelectorAll('.nav-bar button');
        const connectModal = document.getElementById('connect-modal');
        let chartsInitialized = false;

        // Function to control which page is visible
        function showPage(pageId) {
            pages.forEach(page => page.classList.remove('active'));
            navButtons.forEach(button => button.classList.remove('active'));
            
            document.getElementById(pageId).classList.add('active');
            document.getElementById('nav-' + pageId).classList.add('active');

            if (pageId === 'dashboard' && !chartsInitialized) {
                // Wait for the DOM to update before rendering charts
                setTimeout(renderDashboardCharts, 0); 
            }
        }

        function showModal(type) {
            const modalTitle = document.getElementById('modal-title');
            if (type === 'whatsapp') {
                modalTitle.textContent = 'Connect via WhatsApp';
            } else if (type === 'sms') {
                modalTitle.textContent = 'Connect via SMS';
            }
            connectModal.classList.remove('hidden');
        }

        function hideModal() {
            connectModal.classList.add('hidden');
        }

        // --- Chat Widget Logic ---
        const chatLog = document.getElementById('chat-log');
        const questionButtons = document.querySelectorAll('.question-button');
        const languageToggle = document.getElementById('language-toggle');
        const voiceButton = document.getElementById('voice-button');
        const userInput = document.getElementById('user-input');

        const replies = {
            "What are the symptoms of dengue fever?": {
                en: "The common symptoms of dengue fever are high fever, severe headache, muscle and joint pain, and a skin rash. It is important to consult a doctor if you experience these symptoms.",
                hi: "डेंगू बुखार के सामान्य लक्षण हैं तेज बुखार, गंभीर सिरदर्द, मांसपेशियों और जोड़ों में दर्द, और त्वचा पर लाल चकत्ते। यदि आपको ये लक्षण अनुभव हों तो डॉक्टर से परामर्श करना महत्वपूर्ण है।",
                gu: "ડેન્ગ્યુ તાવના સામાન્ય લક્ષણોમાં તાવ, ગંભીર માથાનો દુખાવો, માંસપેશીઓ અને સાંધાનો દુખાવો, અને ચામડી પર ફોલ્લીઓ છે. જો તમને આ લક્ષણો અનુભવાય તો ડૉક્ટરની સલાહ લેવી જરૂરી છે.",
                or: "ଡେଙ୍ଗୁ ଜ୍ୱରର ସାଧାରଣ ଲକ୍ଷଣ ହେଉଛି ଉଚ୍ଚ ଜ୍ୱର, ଗୁରୁତର ମୁଣ୍ଡବିନ୍ଧା, ମାଂସପେଶୀ ଏବଂ ଗଣ୍ଠି ଯନ୍ତ୍ରଣା, ଏବଂ ଚର୍ମରେ ଫୁଲା। ଯଦି ଆପଣ ଏହି ଲକ୍ଷଣଗୁଡିକ ଅନୁଭବ କରନ୍ତି, ତେବେ ଡାକ୍ତରଙ୍କ ସହିତ ପରାମର୍ଶ କରିବା ଗୁରୁତ୍ୱପୂର୍ଣ୍ଣ।"
            },
            "What is the vaccination schedule for children?": {
                en: "The standard vaccination schedule for children includes shots for Polio, Measles, and Hepatitis B at different stages. Please consult a local health worker for a personalized schedule based on your region's guidelines.",
                hi: "बच्चों के लिए मानक टीकाकरण अनुसूची में विभिन्न चरणों में पोलियो, खसरा और हेपेटाइटिस बी के टीके शामिल हैं। कृपया अपने क्षेत्र के दिशानिर्देशों के आधार पर व्यक्तिगत अनुसूची के लिए एक स्थानीय स्वास्थ्य कार्यकर्ता से परामर्श करें।",
                gu: "બાળકો માટે પ્રમાણભૂત રસીકરણ સમયપત્રકમાં વિવિધ તબક્કામાં પોલિયો, ઓરી અને હિપેટાઇટિસ બી માટે રસીઓનો સમાવેશ થાય છે. કૃપા કરીને તમારા પ્રદેશના માર્ગદર્શિકાના આધારે વ્યક્તિગત રસીકરણ સમયપત્રક માટે સ્થાનિક આરોગ્ય કાર્યકરનો સંપર્ક કરો.",
                or: "ପିଲାମାନଙ୍କ ପାଇଁ ସାଧାରଣ ଟୀକାକରଣ କାର୍ଯ୍ୟକ୍ରମରେ ବିଭିନ୍ନ ପର୍ଯ୍ୟାୟରେ ପୋଲିଓ, ମିଳିମିଳା ଏବଂ ହେପାଟାଇଟିସ୍ ବି ପାଇଁ ଟିକା ସାମିଲ ହୋଇଛି। ଆପଣଙ୍କ ଅଞ୍ଚଳର ନିର୍ଦ୍ଦେଶାବଳୀ ଅନୁଯାୟୀ ବ୍ୟକ୍ତିଗତ କାର୍ଯ୍ୟକ୍ରମ ପାଇଁ ଦୟାକରି ଏକ ସ୍ୱାଧୀନ ସ୍ୱାସ୍ଥ୍ୟ କର୍ମୀଙ୍କ ସହ ପରାମର୍ଶ କରନ୍ତୁ।"
            },
            "What should I do if I have a persistent cough?": {
                en: "A persistent cough can be a symptom of various conditions. It's best to see a doctor for a proper diagnosis. In the meantime, you can try drinking warm water with honey and avoiding dust and pollutants.",
                hi: "लगातार खांसी विभिन्न स्थितियों का लक्षण हो सकती है। उचित निदान के लिए डॉक्टर से मिलना सबसे अच्छा है। इस बीच, आप शहद के साथ गर्म पानी पीने और धूल और प्रदूषण से बचने की कोशिश कर सकते हैं।",
                gu: "સતત ઉધરસ વિવિધ પરિસ્થિતિઓનું લક્ષણ હોઈ શકે છે. યોગ્ય નિદાન માટે ડૉક્ટરને મળવું શ્રેષ્ઠ છે. આ દરમિયાન, તમે મધ સાથે ગરમ પાણી પીવાનો પ્રયાસ કરી શકો છો અને ધૂળ અને પ્રદૂષકોથી દૂર રહી શકો છો.",
                or: "ଏକ ଲଗାତାର କାଶ ବିଭିନ୍ନ ରୋଗର ଲକ୍ଷଣ ହୋଇପାରେ। ସଠିକ୍ ରୋଗ ନିର୍ଣ୍ଣୟ ପାଇଁ ଡାକ୍ତରଙ୍କୁ ଦେଖାଇବା ସର୍ବୋତ୍ତମ। ଏହି ସମୟରେ, ଆପଣ ମହୁ ସହିତ ଗରମ ପାଣି ପିଇବା ଏବଂ ଧୂଳି ଓ ପ୍ରଦୂଷଣରୁ ଦୂରେଇ ରହିବାକୁ ଚେଷ୍ଟା କରିପାରିବେ।"
            },
            "Suggest a nearby doctor.": {
                en: "I am a chatbot and cannot provide medical advice or referrals. For a proper diagnosis and treatment, please consult a healthcare professional. You can use the button below to search for doctors near you.",
                hi: "मैं एक चैटबॉट हूं और चिकित्सा सलाह या रेफरल प्रदान नहीं कर सकता। उचित निदान और उपचार के लिए, कृपया एक स्वास्थ्य सेवा पेशेवर से परामर्श लें। आप अपने आस-पास के डॉक्टरों को खोजने के लिए नीचे दिए गए बटन का उपयोग कर सकते हैं।",
                gu: "હું એક ચેટબોટ છું અને તબીબી સલાહ અથવા રેફરલ્સ આપી શકતો નથી. યોગ્ય નિદાન અને સારવાર માટે, કૃપા કરીને એક આરોગ્ય સંભાળ વ્યવસાયીની સલાહ લો. તમે તમારી નજીકના ડોક્ટરોને શોધવા માટે નીચે આપેલા બટનનો ઉપયોગ કરી શકો છો.",
                or: "ମୁଁ ଜଣେ ଚାଟ୍‌ବୋଟ୍ ଏବଂ ଡାକ୍ତରୀ ପରାମର୍ଶ କିମ୍ବା ରେଫେରାଲ୍ ପ୍ରଦାନ କରିପାରିବି ନାହିଁ। ସଠିକ୍ ରୋଗ ନିର୍ଣ୍ଣୟ ଏବଂ ଚିକିତ୍ସା ପାଇଁ, ଦୟାକରି ଜଣେ ସ୍ୱାସ୍ଥ୍ୟ ସେବା ବ୍ୟବସାୟୀଙ୍କ ସହିତ ପରାମର୍ଶ କରନ୍ତୁ। ଆପଣ ଆପଣଙ୍କ ନିକଟସ୍ଥ ଡାକ୍ତରମାନଙ୍କୁ ଖୋଜିବା ପାଇଁ ନିମ୍ନରେ ଥିବା ବଟନ୍ ବ୍ୟବହାର କରିପାରିବେ।"
            },
        };

        function addMessage(text, sender) {
            const msgClass = sender === 'user' ? 'user-message' : 'bot-message';
            const msgDiv = document.createElement('div');
            msgDiv.className = `message-bubble ${msgClass}`;
            msgDiv.textContent = text;
            chatLog.appendChild(msgDiv);
            chatLog.scrollTop = chatLog.scrollHeight;
        }

        function handleQuestion(question) {
            addMessage(question, 'user');
            const lang = languageToggle.value;
            let answer = replies[question][lang] || replies[question].en; // Fallback to English

            if (question === 'Suggest a nearby doctor.') {
                setTimeout(() => {
                    addMessage(answer, 'bot');
                    const linkBtn = document.createElement('a');
                    linkBtn.href = 'https://www.google.com/search?q=doctors+near+me';
                    linkBtn.target = '_blank';
                    linkBtn.className = 'question-button self-start mt-2';
                    linkBtn.textContent = 'Search on Google Maps';
                    chatLog.appendChild(linkBtn);
                    chatLog.scrollTop = chatLog.scrollHeight;
                }, 1000);
            } else {
                setTimeout(() => {
                    addMessage(answer, 'bot');
                }, 1000);
            }
        }

        questionButtons.forEach(button => {
            button.addEventListener('click', () => {
                const question = button.getAttribute('data-question');
                handleQuestion(question);
            });
        });

        // Web Speech API for Mic Button
        if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            const recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.lang = 'en-IN'; // Set a default language

            voiceButton.addEventListener('click', () => {
                voiceButton.classList.add('is-listening');
                recognition.start();
            });

            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                userInput.value = transcript;
                addMessage(transcript, 'user');
                setTimeout(() => {
                    addMessage("Thank you for your voice message. For now, please use the predefined questions or the text input.", 'bot');
                }, 1000);
            };

            recognition.onend = () => {
                voiceButton.classList.remove('is-listening');
            };

            recognition.onerror = (event) => {
                console.error('Speech recognition error:', event.error);
                voiceButton.classList.remove('is-listening');
                addMessage("I'm sorry, I couldn't hear that. Please type your message or try speaking again.", 'bot');
            };
        } else {
            // Hide the voice button if API is not supported
            voiceButton.style.display = 'none';
        }

        // --- Dashboard Chart Logic ---
        function renderDashboardCharts() {
            if (chartsInitialized) return; // Prevent re-initialization

            const userQueriesCtx = document.getElementById('userQueriesChart').getContext('2d');
            const symptomsCtx = document.getElementById('symptomsChart').getContext('2d');
            const awarenessCtx = document.getElementById('awarenessChart').getContext('2d');

            new Chart(userQueriesCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'User Queries',
                        data: [120, 150, 200, 250, 300, 350],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.2)',
                        fill: true,
                        tension: 0.4,
                        borderWidth: 3,
                        pointBackgroundColor: '#10b981',
                        pointRadius: 5
                    }]
                },
                options: { 
                    responsive: true, 
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { grid: { display: false } },
                        y: { beginAtZero: true, grid: { color: '#e2e8f0' } }
                    }
                }
            });

            new Chart(symptomsCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Fever', 'Cough', 'Body Ache', 'Sore Throat', 'Dizziness'],
                    datasets: [{
                        label: 'Reported Symptoms',
                        data: [30, 25, 15, 10, 5],
                        backgroundColor: ['#ef4444', '#3b82f6', '#f59e0b', '#10b981', '#6366f1'],
                        borderColor: 'white',
                        borderWidth: 2
                    }]
                },
                options: { 
                    responsive: true, 
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'bottom' } }
                }
            });

            new Chart(awarenessCtx, {
                type: 'bar',
                data: {
                    labels: ['Q1', 'Q2', 'Q3', 'Q4'],
                    datasets: [{
                        label: 'Awareness Growth (%)',
                        data: [5, 12, 18, 20],
                        backgroundColor: '#059669',
                        borderRadius: 8,
                    }]
                },
                options: { 
                    responsive: true, 
                    maintainAspectRatio: false, 
                    plugins: { legend: { display: false } },
                    scales: { 
                        x: { grid: { display: false } },
                        y: { beginAtZero: true, grid: { color: '#e2e8f0' } } 
                    } 
                }
            });

            const vaccinationData = [
                { vaccine: 'Measles', location: 'Primary Health Centre A', date: '2025-10-05' },
                { vaccine: 'Polio', location: 'Community Hall B', date: '2025-10-12' },
                { vaccine: 'Dengue', location: 'City Hospital C', date: '2025-10-19' },
            ];

            const vaccinationTableBody = document.getElementById('vaccinationTable');
            vaccinationTableBody.innerHTML = ''; // Clear existing data to prevent duplicates
            vaccinationData.forEach(row => {
                const tr = document.createElement('tr');
                tr.className = 'border-b border-slate-200 last:border-0 transition-colors hover:bg-slate-50';
                tr.innerHTML = `<td class="py-3 px-4">${row.vaccine}</td><td class="py-3 px-4">${row.location}</td><td class="py-3 px-4">${row.date}</td>`;
                vaccinationTableBody.appendChild(tr);
            });
            chartsInitialized = true;
        }

        // --- Form Submission Logic ---
        document.getElementById('userForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const formMessage = document.getElementById('form-message');
            formMessage.textContent = 'Thank you! Your information has been submitted successfully.';
            formMessage.classList.remove('hidden');
            e.target.reset();
        });

        document.getElementById('connectForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const connectMessage = document.getElementById('connect-message');
            connectMessage.textContent = 'Thank you! Your details have been submitted. A connection will be established shortly.';
            connectMessage.classList.remove('hidden');
            e.target.reset();
        });
    </script>
</body>
</html>
